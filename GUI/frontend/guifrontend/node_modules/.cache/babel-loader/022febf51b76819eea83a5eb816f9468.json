{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"/home/akshat/Anveshak/touchpad/frontend/guifrontend/src/Topics.js\",\n    _s = $RefreshSig$(),\n    _s2 = $RefreshSig$(),\n    _s3 = $RefreshSig$();\n\nimport './Topics.css';\nimport { useState, useEffect } from 'react';\nlet len = 0;\n\nasync function addTopic(topic, desc, msgtype) {\n  let promise = new Promise(function (resolve, reject) {\n    fetch(\"http://localhost:5000/api/addtopic?topic=\" + topic + \"&topicdesc=\" + desc + \"&msgtype=\" + msgtype).then(res => {\n      if (res.ok) {\n        console.log(\"added topic\");\n        resolve(true);\n      } else {\n        alert(\"Error in adding topic!\");\n        resolve(false);\n      }\n    });\n  });\n  let result = await promise;\n  return result;\n}\n\nfunction Topics() {\n  _s();\n\n  const [topics, setTopics] = useState([]);\n  const [msgBoxes, setMsgBoxes] = useState([]);\n  let listeners = {};\n\n  function fetchTopics() {\n    fetch(\"http://localhost:5000/api/topics\").then(async res => {\n      if (res.ok) {\n        console.log(\"fetched\");\n        setTopics(await res.json());\n      }\n    });\n  }\n\n  function unmount(id) {\n    document.getElementById(id).style.display = \"none\";\n  }\n\n  function addMessageBox(listener) {\n    console.log(msgBoxes);\n    let id = \"msgBox\" + len;\n    len = len + 1;\n    console.log(id);\n    setMsgBoxes(msgBoxes => [...msgBoxes, /*#__PURE__*/_jsxDEV(MessageBox, {\n      id: id,\n      listener: listener,\n      unmount: unmount\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 44\n    }, this)]);\n  }\n\n  useEffect(fetchTopics, []);\n  topics.forEach(topic => {\n    let listener = new window.ROSLIB.Topic({\n      ros: window.ros,\n      name: topic[0],\n      messageType: topic[2]\n    });\n    listeners[topic[0]] = listener;\n  });\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    id: \"topics\",\n    children: [/*#__PURE__*/_jsxDEV(\"center\", {\n      children: /*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"Topics\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 23\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 15\n    }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 47\n    }, this), /*#__PURE__*/_jsxDEV(TopicListView, {\n      topicList: topics,\n      rerender: fetchTopics,\n      listeners: listeners,\n      addMessageBox: addMessageBox\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 17\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      id: \"arena\",\n      children: msgBoxes\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 15\n    }, this), /*#__PURE__*/_jsxDEV(TopicForm, {\n      rerender: () => {\n        fetchTopics();\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 15\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 89,\n    columnNumber: 12\n  }, this);\n}\n\n_s(Topics, \"kTcSlVojXYqBpJxTy/8AYkKCblI=\");\n\n_c = Topics;\n\nfunction TopicListView(props) {\n  function deleteTopic(topic) {\n    fetch(\"http://localhost:5000/api/deletetopic?topic=\" + topic).then(res => {\n      if (res.ok) {\n        props.rerender();\n      } else {\n        alert(\"Error!\");\n      }\n    });\n  }\n\n  function viewTopic(topic) {\n    props.addMessageBox(props.listeners[topic]);\n  }\n\n  let content = [];\n  props.topicList.forEach(topic => {\n    content.push( /*#__PURE__*/_jsxDEV(\"tr\", {\n      children: [/*#__PURE__*/_jsxDEV(\"td\", {\n        children: topic[0]\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 141,\n        columnNumber: 26\n      }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n        children: topic[1]\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 141,\n        columnNumber: 45\n      }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n        children: topic[2]\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 141,\n        columnNumber: 64\n      }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n        onClick: () => {\n          viewTopic(topic[0]);\n        },\n        children: \"View Topic\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 141,\n        columnNumber: 83\n      }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n        onClick: () => {\n          deleteTopic(topic[0]);\n        },\n        children: \"Delete Topic\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 141,\n        columnNumber: 138\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 22\n    }, this));\n  });\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    id: \"topicList\",\n    children: /*#__PURE__*/_jsxDEV(\"table\", {\n      className: \"styled-table\",\n      children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n        children: /*#__PURE__*/_jsxDEV(\"tr\", {\n          children: [/*#__PURE__*/_jsxDEV(\"th\", {\n            children: \"Topic\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 151,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            children: \"Description\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 152,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            children: \"Mesage\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 153,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            children: \"View Topic\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 154,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            children: \"Delete Topic\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 155,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 150,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 149,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n        children: content\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 159,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 148,\n      columnNumber: 9\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 146,\n    columnNumber: 11\n  }, this);\n}\n\n_c2 = TopicListView;\n\nfunction MessageBox(props) {\n  _s2();\n\n  const [msgs, setMsgs] = useState([]);\n  useEffect(() => {\n    props.listener.subscribe(message => {\n      setMsgs(msgs => [...msgs, JSON.stringify(message)]);\n    });\n  }, []);\n\n  function close() {\n    props.listener.unsubscribe();\n    props.unmount(props.id);\n  }\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    id: props.id,\n    children: [/*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: () => close(),\n      children: \"Close\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 198,\n      columnNumber: 17\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"messageView\",\n      children: msgs\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 200,\n      columnNumber: 17\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 197,\n    columnNumber: 13\n  }, this);\n}\n\n_s2(MessageBox, \"0Kr7D6InBt5ALD3i3EArD4nEKQE=\");\n\n_c3 = MessageBox;\n\nfunction TopicForm(props) {\n  _s3();\n\n  let normalButton = /*#__PURE__*/_jsxDEV(\"button\", {\n    onClick: () => {\n      addTopicFromForm();\n    },\n    children: \"Add Topic + \"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 210,\n    columnNumber: 22\n  }, this);\n\n  let disabledButton = /*#__PURE__*/_jsxDEV(\"button\", {\n    onClick: () => {\n      addTopicFromForm();\n    },\n    disabled: true,\n    children: \"Adding...\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 211,\n    columnNumber: 24\n  }, this);\n\n  const [button, setButton] = useState(normalButton);\n\n  function addTopicFromForm() {\n    let topic = document.getElementById(\"topic\").value;\n    let topicdesc = document.getElementById(\"topicdesc\").value;\n    let message = document.getElementById(\"message\").value;\n    addTopic(topic, topicdesc, message).then(res => {\n      if (res) {\n        setButton(normalButton);\n        props.rerender();\n      }\n    });\n    setButton(disabledButton);\n  }\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"nodeForm\",\n    children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n      children: \"Add a Topic\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 235,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      type: \"text\",\n      id: \"topic\",\n      placeholder: \"Name of the topic\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 238,\n      columnNumber: 7\n    }, this), \" \", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 238,\n      columnNumber: 72\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      type: \"text\",\n      id: \"topicdesc\",\n      placeholder: \"Description of the topic\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 239,\n      columnNumber: 7\n    }, this), \" \", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 239,\n      columnNumber: 83\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      type: \"text\",\n      id: \"message\",\n      placeholder: \"Message Type (eg. geometry_msgs/Twist)\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 240,\n      columnNumber: 7\n    }, this), \" \", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 240,\n      columnNumber: 95\n    }, this), button]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 232,\n    columnNumber: 10\n  }, this);\n}\n\n_s3(TopicForm, \"/+yRqKJ1Teb0Z6zQevqljHfXngY=\");\n\n_c4 = TopicForm;\nexport default Topics;\n\nvar _c, _c2, _c3, _c4;\n\n$RefreshReg$(_c, \"Topics\");\n$RefreshReg$(_c2, \"TopicListView\");\n$RefreshReg$(_c3, \"MessageBox\");\n$RefreshReg$(_c4, \"TopicForm\");","map":{"version":3,"sources":["/home/akshat/Anveshak/touchpad/frontend/guifrontend/src/Topics.js"],"names":["useState","useEffect","len","addTopic","topic","desc","msgtype","promise","Promise","resolve","reject","fetch","then","res","ok","console","log","alert","result","Topics","topics","setTopics","msgBoxes","setMsgBoxes","listeners","fetchTopics","json","unmount","id","document","getElementById","style","display","addMessageBox","listener","forEach","window","ROSLIB","Topic","ros","name","messageType","TopicListView","props","deleteTopic","rerender","viewTopic","content","topicList","push","MessageBox","msgs","setMsgs","subscribe","message","JSON","stringify","close","unsubscribe","TopicForm","normalButton","addTopicFromForm","disabledButton","button","setButton","value","topicdesc"],"mappings":"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","sourcesContent":["\nimport './Topics.css'\n\nimport {useState, useEffect} from 'react';\nlet len = 0\n\n\nasync function addTopic(topic,desc,msgtype)\n{\n  let promise = new Promise(function(resolve, reject) {\n    \n  \n    fetch(\"http://localhost:5000/api/addtopic?topic=\"+topic+\"&topicdesc=\"+desc+\"&msgtype=\"+msgtype).then((res)=>{\n\n        if(res.ok)\n        {\n          console.log(\"added topic\")\n           resolve(true) \n        }\n        else{\n         \n          alert(\"Error in adding topic!\")\n          resolve(false) \n        }\n\n\n    })\n\n  });\n\n  let result = await promise\n  return result\n\n\n\n}\n\nfunction Topics()\n{\n    \n       \n   const [topics,setTopics] = useState([]);\n   const [msgBoxes,setMsgBoxes] = useState([]);\n   let listeners = {}\n   \n\n    function fetchTopics()\n    {\n        fetch(\"http://localhost:5000/api/topics\").then(async (res)=>{\n            if(res.ok)\n            {\n                console.log(\"fetched\");\n               setTopics(await res.json());\n               \n              \n            }\n          });\n    }\n    function unmount(id)\n    {\n       document.getElementById(id).style.display=\"none\";\n    }\n    function addMessageBox(listener)\n    {\n        console.log(msgBoxes)\n        let id = \"msgBox\"+len\n        len = len+1\n        console.log(id)\n        setMsgBoxes(msgBoxes=>[...msgBoxes,<MessageBox id={id} listener={listener} unmount={unmount} />])\n    }\n   \n\n\n\n\n    useEffect(fetchTopics,[]);\n\n\n    topics.forEach((topic)=>{\n        let listener = new window.ROSLIB.Topic({\n            ros : window.ros,\n            name : topic[0],\n            messageType : topic[2]\n          });\n          listeners[topic[0]] = listener;\n    });\n    \n\n    return(<div id=\"topics\">\n              <center><h2>Topics</h2></center><br />\n\n        \n                \n                <TopicListView topicList={topics} rerender={fetchTopics} listeners={listeners}  addMessageBox={addMessageBox}>\n\n              </TopicListView>\n\n              <div id=\"arena\">\n                  {msgBoxes}\n\n              </div>\n              <TopicForm  rerender={()=>{fetchTopics()}} />\n          \n\n\n    </div>);\n}\n\nfunction TopicListView(props)\n{\n\n\n    function deleteTopic(topic)\n    {\n       \n          \n          fetch(\"http://localhost:5000/api/deletetopic?topic=\"+topic).then((res)=>{\n            if(res.ok)\n            {\n               props.rerender();\n      \n            }\n            else\n            {\n              alert(\"Error!\");\n            }\n          });\n        \n      \n    }\n    function viewTopic(topic)\n    {\n        props.addMessageBox(props.listeners[topic])\n        \n    }\n\n    let content = []\n    props.topicList.forEach(\n        (topic)=>\n    {\n        content.push(<tr><td>{topic[0]}</td><td>{topic[1]}</td><td>{topic[2]}</td><td onClick={()=>{viewTopic(topic[0])}}>View Topic</td><td onClick={()=>{deleteTopic(topic[0])}}>Delete Topic</td></tr>)\n    }\n    )\n  \n\n   return(<div  id=\"topicList\">\n\n        <table className=\"styled-table\">\n            <thead>\n            <tr>            \n                <th>Topic</th>\n                <th>Description</th>\n                <th>Mesage</th>\n                <th>View Topic</th>\n                <th>Delete Topic</th>\n                \n            </tr>\n            </thead>\n            <tbody>\n            {content}            \n            </tbody>\n\n            \n        </table>\n\n\n\n   </div>);\n}\n \n\nfunction MessageBox(props){\n    \n\n    const [msgs,setMsgs] = useState([])\n\n    useEffect(()=>{\n      \n        props.listener.subscribe((message)=>{\n            \n            setMsgs(msgs => [...msgs, JSON.stringify(message)])\n           \n\n    });\n    \n    \n    },[]);\n\n    function close()\n    {\n        props.listener.unsubscribe()\n        props.unmount(props.id) \n    }\n\n    return (\n\n            <div id={props.id}>\n                <button onClick={()=>close()}>Close</button>\n\n                <div className=\"messageView\">\n                    {msgs}\n                </div>\n            </div>\n\n\n    );\n}\nfunction TopicForm(props)\n{\n  let normalButton = <button onClick={()=>{addTopicFromForm()}}>Add Topic + </button>\n  let disabledButton = <button onClick={()=>{addTopicFromForm()}} disabled>Adding...</button>\n  \n  const [button,setButton] = useState(normalButton)\n  function addTopicFromForm()\n  {\n   \n    let topic = document.getElementById(\"topic\").value;\n    let topicdesc = document.getElementById(\"topicdesc\").value;\n    let message = document.getElementById(\"message\").value;\n    addTopic(topic,topicdesc,message).then((res)=>{\n        if(res)\n        {\n            setButton(normalButton)\n            props.rerender()\n        }\n    });\n    setButton(disabledButton)\n\n\n  }\n \n  return(<div className=\"nodeForm\">\n\n\n      <h3>Add a Topic</h3>\n\n\n      <input type=\"text\" id=\"topic\" placeholder=\"Name of the topic\" /> <br />\n      <input type=\"text\" id=\"topicdesc\" placeholder=\"Description of the topic\" /> <br />\n      <input type=\"text\" id=\"message\" placeholder=\"Message Type (eg. geometry_msgs/Twist)\" /> <br />\n    \n      {button}\n      \n      \n\n\n\n  </div>)\n}\nexport default Topics;"]},"metadata":{},"sourceType":"module"}