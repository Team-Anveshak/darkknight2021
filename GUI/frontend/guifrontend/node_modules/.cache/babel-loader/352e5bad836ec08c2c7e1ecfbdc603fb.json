{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"/home/akshat/Anveshak/touchpad/frontend/guifrontend/src/Topics.js\",\n    _s = $RefreshSig$(),\n    _s2 = $RefreshSig$();\n\nimport './Topics.css';\nimport { useState, useEffect } from 'react';\n\nfunction Topics() {\n  _s();\n\n  const [topics, setTopics] = useState([]);\n  const [msgBoxes, setMsgBoxes] = useState([]);\n  let listeners = {};\n\n  function fetchTopics() {\n    fetch(\"http://localhost:5000/api/topics\").then(async res => {\n      if (res.ok) {\n        console.log(\"fetched\");\n        setTopics(await res.json());\n      }\n    });\n  }\n\n  function addMessageBox(listener) {\n    let id = \"msgBox\" + toString(msgBoxes.length + 1);\n    msgBoxes.push( /*#__PURE__*/_jsxDEV(MessageBox, {\n      id: id,\n      listener: listener\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 33,\n      columnNumber: 23\n    }, this));\n    setMsgBoxes(msgBoxes);\n  }\n\n  useEffect(fetchTopics, []);\n  topics.forEach(topic => {\n    let listener = new window.ROSLIB.Topic({\n      ros: window.ros,\n      name: topic[1],\n      messageType: topic[2]\n    });\n    listeners[topic[0]] = listener;\n  });\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    id: \"topics\",\n    children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n      children: \"Topics\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 15\n    }, this), /*#__PURE__*/_jsxDEV(TopicListView, {\n      topicList: topics,\n      rerender: fetchTopics,\n      listeners: listeners,\n      addMessageBox: addMessageBox\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 17\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      id: \"arena\",\n      children: msgBoxes\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 15\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 52,\n    columnNumber: 12\n  }, this);\n}\n\n_s(Topics, \"kTcSlVojXYqBpJxTy/8AYkKCblI=\");\n\n_c = Topics;\n\nfunction TopicListView(props) {\n  function deleteTopic(topic) {\n    fetch(\"http://localhost:5000/api/deletetopic?topic=\" + topic).then(res => {\n      if (res.ok) {\n        props.rerender();\n      } else {\n        alert(\"Error!\");\n      }\n    });\n  }\n\n  function viewTopic(topic) {\n    props.addMessageBox(props.listeners[topic]);\n  }\n\n  let content = [];\n  props.topicList.forEach(topic => {\n    content.push( /*#__PURE__*/_jsxDEV(\"tr\", {\n      children: [/*#__PURE__*/_jsxDEV(\"td\", {\n        children: topic[0]\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 26\n      }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n        children: topic[1]\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 45\n      }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n        children: topic[2]\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 64\n      }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n        onClick: () => {\n          viewTopic(topic[0]);\n        },\n        children: \"View Topic\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 83\n      }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n        onClick: () => {\n          deleteTopic(topic[0]);\n        },\n        children: \"Delete Topic\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 138\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 22\n    }, this));\n  });\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    id: \"topicList\",\n    children: /*#__PURE__*/_jsxDEV(\"table\", {\n      children: [/*#__PURE__*/_jsxDEV(\"tr\", {\n        children: [/*#__PURE__*/_jsxDEV(\"th\", {\n          children: \"Topic\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 112,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n          children: \"Description\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 113,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n          children: \"Mesage\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 114,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n          children: \"View Topic\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 115,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n          children: \"Delete Topic\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 116,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 111,\n        columnNumber: 13\n      }, this), content]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 9\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 108,\n    columnNumber: 11\n  }, this);\n}\n\n_c2 = TopicListView;\n\nfunction MessageBox(props) {\n  _s2();\n\n  const [msgs, setMsgs] = useState([]);\n  useEffect(() => {\n    props.listener.subscribe(message => {\n      msgs.append(message);\n      setMsgs(msgs);\n      console.log(message);\n    });\n  }, []);\n\n  function close() {\n    props.listener.unsubscribe();\n    props.unmount(props.id);\n  }\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: () => close(),\n      children: \"Close\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 156,\n      columnNumber: 17\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"messageView\",\n      children: msgs\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 158,\n      columnNumber: 17\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 155,\n    columnNumber: 13\n  }, this);\n}\n\n_s2(MessageBox, \"0Kr7D6InBt5ALD3i3EArD4nEKQE=\");\n\n_c3 = MessageBox;\nexport default Topics;\n\nvar _c, _c2, _c3;\n\n$RefreshReg$(_c, \"Topics\");\n$RefreshReg$(_c2, \"TopicListView\");\n$RefreshReg$(_c3, \"MessageBox\");","map":{"version":3,"sources":["/home/akshat/Anveshak/touchpad/frontend/guifrontend/src/Topics.js"],"names":["useState","useEffect","Topics","topics","setTopics","msgBoxes","setMsgBoxes","listeners","fetchTopics","fetch","then","res","ok","console","log","json","addMessageBox","listener","id","toString","length","push","forEach","topic","window","ROSLIB","Topic","ros","name","messageType","TopicListView","props","deleteTopic","rerender","alert","viewTopic","content","topicList","MessageBox","msgs","setMsgs","subscribe","message","append","close","unsubscribe","unmount"],"mappings":"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","sourcesContent":["\nimport './Topics.css'\n\nimport {useState, useEffect} from 'react';\n\n\n\n\nfunction Topics()\n{\n    \n       \n   const [topics,setTopics] = useState([]);\n   const [msgBoxes,setMsgBoxes] = useState([]);\n   let listeners = {}\n   \n\n    function fetchTopics()\n    {\n        fetch(\"http://localhost:5000/api/topics\").then(async (res)=>{\n            if(res.ok)\n            {\n                console.log(\"fetched\");\n               setTopics(await res.json());\n               \n              \n            }\n          });\n    }\n    function addMessageBox(listener)\n    {\n        let id = \"msgBox\"+toString((msgBoxes.length+1))\n        msgBoxes.push(<MessageBox id={id} listener={listener} />)\n        setMsgBoxes(msgBoxes)\n    }\n\n\n\n    useEffect(fetchTopics,[]);\n\n\n    topics.forEach((topic)=>{\n        let listener = new window.ROSLIB.Topic({\n            ros : window.ros,\n            name : topic[1],\n            messageType : topic[2]\n          });\n          listeners[topic[0]] = listener;\n    });\n    \n\n    return(<div id=\"topics\">\n              <h3>Topics</h3>\n\n\n                \n                <TopicListView topicList={topics} rerender={fetchTopics} listeners={listeners} addMessageBox={addMessageBox}>\n\n              </TopicListView>\n\n              <div id=\"arena\">\n                  {msgBoxes}\n\n              </div>\n          \n\n\n    </div>);\n}\n\nfunction TopicListView(props)\n{\n\n\n    function deleteTopic(topic)\n    {\n       \n          \n          fetch(\"http://localhost:5000/api/deletetopic?topic=\"+topic).then((res)=>{\n            if(res.ok)\n            {\n               props.rerender();\n      \n            }\n            else\n            {\n              alert(\"Error!\");\n            }\n          });\n        \n      \n    }\n    function viewTopic(topic)\n    {\n        props.addMessageBox(props.listeners[topic])\n        \n    }\n\n    let content = []\n    props.topicList.forEach(\n        (topic)=>\n    {\n        content.push(<tr><td>{topic[0]}</td><td>{topic[1]}</td><td>{topic[2]}</td><td onClick={()=>{viewTopic(topic[0])}}>View Topic</td><td onClick={()=>{deleteTopic(topic[0])}}>Delete Topic</td></tr>)\n    }\n    )\n  \n\n   return(<div  id=\"topicList\">\n\n        <table>\n            <tr>            \n                <th>Topic</th>\n                <th>Description</th>\n                <th>Mesage</th>\n                <th>View Topic</th>\n                <th>Delete Topic</th>\n                \n            </tr>\n\n            {content}            \n\n            \n        </table>\n\n\n\n   </div>);\n}\n\n\nfunction MessageBox(props){\n    \n\n    const [msgs,setMsgs] = useState([])\n\n    useEffect(()=>{\n        props.listener.subscribe((message)=>{\n            \n            msgs.append(message)\n            setMsgs(msgs)\n            console.log(message)\n           \n\n    });     \n    },[]);\n\n    function close()\n    {\n        props.listener.unsubscribe()\n        props.unmount(props.id) \n    }\n\n    return (\n\n            <div>\n                <button onClick={()=>close()}>Close</button>\n\n                <div className=\"messageView\">\n                    {msgs}\n                </div>\n            </div>\n\n\n    );\n}\n\nexport default Topics;"]},"metadata":{},"sourceType":"module"}